(function(t){function e(e){for(var s,o,i=e[0],c=e[1],u=e[2],d=0,m=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&m.push(a[o][0]),a[o]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);l&&l(e);while(m.length)m.shift()();return n.push.apply(n,u||[]),r()}function r(){for(var t,e=0;e<n.length;e++){for(var r=n[e],s=!0,i=1;i<r.length;i++){var c=r[i];0!==a[c]&&(s=!1)}s&&(n.splice(e--,1),t=o(o.s=r[0]))}return t}var s={},a={app:0},n=[];function o(e){if(s[e])return s[e].exports;var r=s[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=s,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(r,s,function(e){return t[e]}.bind(null,s));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/~a72730/LAB11/dist/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=c;n.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"0d89":function(t,e,r){"use strict";r("39ae")},"1c6c":function(t,e,r){},"24e8":function(t,e,r){"use strict";r("1c6c")},"2e93":function(t,e){},"39ae":function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var s=r("2b0e"),a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},n=[],o=r("2877"),i={},c=Object(o["a"])(i,a,n,!1,null,null,null),u=c.exports,l=r("8c4f"),d=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"background d-flex justify-content-center align-items-center",attrs:{id:"teste"}},[r("div",[r("router-link",{attrs:{to:"/shop"}},[r("button",{staticClass:"btn btn-success btn-block btn-lg",attrs:{type:"button","data-mdb-ripple-color":"dark"}},[t._v(" Go to Shop ")])])],1)])},m=[],p={components:{}},f=p,h=(r("24e8"),Object(o["a"])(f,d,m,!1,null,"5b7b393a",null)),g=h.exports,b=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("Header"),r("section",{staticClass:"py-5"},[r("div",{staticClass:"container px-4 px-lg-5 mt-5"},[r("div",{staticClass:"row gx-4 gx-lg-5 row-cols-2 row-cols-md-3 row-cols-xl-4 justify-content-center"},t._l(t.products,(function(t){return r("ShopItem",{key:t.id,attrs:{name:t.name,id:t.id,price:t.price,imageSrc:t.image}})})),1)])]),r("Footer")],1)},v=[],x=r("1da1"),w=(r("96cf"),r("fd2d")),y=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("nav",{staticClass:"navbar navbar-expand-lg navbar-light",staticStyle:{"background-color":"#5F8575"}},[r("div",{staticClass:"container px-4 px-lg-5"},[r("a",{staticClass:"navbar-brand"},[t._v("Mips Plants")]),t._m(0),r("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarSupportedContent"}},[r("ul",{staticClass:"navbar-nav me-auto mb-2 mb-lg-0 ms-lg-4"},[r("li",{staticClass:"nav-item"},[r("router-link",{staticClass:"nav-link active",attrs:{to:"/"}},[t._v("Home")])],1),r("li",{staticClass:"nav-item"},[r("router-link",{staticClass:"nav-link",attrs:{to:"/shop"}},[t._v("Shop")])],1)]),r("form",{staticClass:"d-flex"},[t.userAuth?r("router-link",{staticStyle:{padding:"0.5rem 0.8rem",color:"black","text-decoration":"none"},attrs:{to:"/myorders"}},[t._v("My Orders")]):r("router-link",{staticStyle:{padding:"0.5rem 0.8rem",color:"black","text-decoration":"none"},attrs:{to:"/login"}},[t._v("Login")]),t.userAuth?r("router-link",{staticStyle:{padding:"0.5rem 0rem",color:"black","text-decoration":"none","margin-right":"1rem"},attrs:{to:"/logout"}},[t._v("Logout")]):r("router-link",{staticStyle:{padding:"0.5rem 0rem",color:"black","text-decoration":"none","margin-right":"1rem"},attrs:{to:"/register"}},[t._v("Register")]),r("router-link",{attrs:{to:"/basket"}},[r("button",{staticClass:"btn btn-outline-dark",attrs:{type:"submit"}},[r("i",{staticClass:"bi-cart-fill me-1"}),t._v(" Cart "),r("span",{staticClass:"badge bg-dark text-white ms-1 rounded-pill"},[t._v(t._s(this.getBasketNumber()))])])])],1)])])])},C=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"}},[r("span",{staticClass:"navbar-toggler-icon"})])}],_={data:function(){return{userAuth:!1}},methods:{getBasketNumber:function(){var t=this.$store.getters["basket/getProducts"];return t.length},initUserAuth:function(){this.userAuth=void 0!=this.$store.getters["user/getUser"].id}},computed:{},created:function(){this.initUserAuth()}},k=_,P=Object(o["a"])(k,y,C,!1,null,null,null),O=P.exports,S=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"col mb-5"},[r("div",{staticClass:"card h-100"},[r("img",{staticClass:"card-img-top",attrs:{src:"images/"+t.imageSrc,alt:"...",width:"250",height:"320"}}),r("div",{staticClass:"card-body p-4"},[r("div",{staticClass:"text-center"},[r("h5",{staticClass:"fw-bolder"},[t._v(t._s(t.name))]),t._v(" "+t._s(t.price)+" € ")])]),r("div",{staticClass:"card-footer p-4 pt-0 border-top-0 bg-transparent"},[r("div",{staticClass:"text-center"},[r("button",{staticClass:"btn btn-outline-dark mt-auto",on:{click:function(e){return t.addToBasket()}}},[t._v("Order")])])])])])},$=[],j={props:["name","price","imageSrc","id"],methods:{addToBasket:function(){this.$store.commit("basket/incrementProduct",this.id)}},computed:{},data:function(){return{}}},E=j,A=Object(o["a"])(E,S,$,!1,null,null,null),I=A.exports,R={showModal:!0,components:{Footer:w["default"],Header:O,ShopItem:I},data:function(){return{products:[]}},methods:{fetchProducts:function(){var t=this;return Object(x["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("products/getProductsFromDB");case 2:t.products=t.$store.getters["products/getProducts"];case 3:case"end":return e.stop()}}),e)})))()}},created:function(){this.fetchProducts()},mounted:function(){},computed:{}},B=R,F=Object(o["a"])(B,b,v,!1,null,"6b7be547",null),U=F.exports,q=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Header"),r("section",{staticClass:"h-100 h-custom",staticStyle:{"background-color":"#5F8575"}},[r("div",{staticClass:"container py-5 h-100"},[0==t.totalItems?r("div",[r("p",[t._v("Empty cart, go order something :) !!")]),r("router-link",{attrs:{to:"/shop"}},[r("button",{staticClass:"btn btn-dark btn-block btn-lg",attrs:{type:"button","data-mdb-ripple-color":"dark"}},[t._v("Order ")])])],1):r("div",{staticClass:"row d-flex justify-content-center align-items-center h-100"},[r("div",{staticClass:"col-12"},[r("div",{staticClass:"card card-registration card-registration-2",staticStyle:{"border-radius":"15px"}},[r("div",{staticClass:"card-body p-0"},[r("div",{staticClass:"row g-0"},[r("div",{staticClass:"col-lg-8"},[r("div",{staticClass:"p-5"},[r("div",{staticClass:"d-flex justify-content-between align-items-center mb-5"},[r("h1",{staticClass:"fw-bold mb-0 text-black"},[t._v("Shopping Cart")]),0==t.totalItems?r("h6",{staticClass:"mb-0 text-muted"},[t._v(" items")]):t._e()]),r("hr",{staticClass:"my-4"}),t._l(t.basketProducts,(function(e){return r("BasketItem",{key:e.id,attrs:{basketProduct:e},on:{callbackfn:t.redo}})})),r("div",{staticClass:"pt-5"},[r("h6",{staticClass:"mb-0"},[r("router-link",{staticClass:"text-body",attrs:{to:"/shop"}},[r("i",{staticClass:"fas fa-long-arrow-alt-left me-2"}),t._v("Back to shop")])],1)])],2)]),r("div",{staticClass:"col-lg-4 bg-grey"},[r("div",{staticClass:"p-5"},[r("h3",{staticClass:"fw-bold mb-5 mt-2 pt-1"},[t._v("Summary")]),r("hr",{staticClass:"my-4"}),r("div",{staticClass:"d-flex justify-content-between mb-5"},[r("h5",{staticClass:"text-uppercase"},[t._v("Total price")]),r("h5",[t._v(t._s(t.totalPrice)+" €")])]),1==t.userAuth?r("button",{staticClass:"btn btn-dark btn-block btn-lg",attrs:{type:"button","data-mdb-ripple-color":"dark"},on:{click:function(e){return t.makeOrder()}}},[t._v("Order")]):r("router-link",{attrs:{to:"/login"}},[r("button",{staticClass:"btn btn-dark btn-block btn-lg",attrs:{type:"button","data-mdb-ripple-color":"dark"}},[t._v("Login to order")])])],1)])])])])])])])]),r("Footer")],1)},M=[],L=(r("d3b7"),r("25f0"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"row mb-4 d-flex justify-content-between align-items-center"},[r("div",{staticClass:"col-md-2 col-lg-2 col-xl-2"},[r("img",{staticClass:"img-fluid rounded-3",attrs:{src:"images/"+t.basketProduct.image,alt:"Cotton T-shirt"}})]),r("div",{staticClass:"col-md-3 col-lg-3 col-xl-3"},[r("h6",{staticClass:"text-muted"},[t._v("Plant")]),r("h6",{staticClass:"text-black mb-0"},[t._v(t._s(t.basketProduct.name))])]),r("div",{staticClass:"col-md-3 col-lg-3 col-xl-3 d-flex"},[r("button",{staticClass:"btn btn-link px-2",on:{click:function(e){return t.decrement()}}},[r("i",{staticClass:"bi bi-dash-circle-fill fa-2x",staticStyle:{color:"black","font-size":"19px"}})]),r("div",[t._v(" "+t._s(t.quantity)+" ")]),r("button",{staticClass:"btn btn-link px-2",on:{click:function(e){return t.increment()}}},[r("i",{staticClass:"bi bi-plus-circle-fill fa-2x",staticStyle:{color:"black","font-size":"19px"}})])]),r("div",{staticClass:"col-md-3 col-lg-2 col-xl-2 offset-lg-1"},[r("h6",{staticClass:"mb-0"},[t._v(t._s(t.basketProduct.price)+" €")])]),t._m(0)]),r("hr",{staticClass:"my-4"})])}),T=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"col-md-1 col-lg-1 col-xl-1 text-end"},[r("a",{staticClass:"text-muted",attrs:{href:"#!"}},[r("i",{staticClass:"fas fa-times"})])])}],D={props:["basketProduct"],methods:{increment:function(){console.log("quantity before"+this.$store.getters["products/getProduct"](this.basketProduct.id).quantity),this.$store.commit("basket/incrementProduct",this.basketProduct.id),console.log("quantity after"+this.$store.getters["products/getProduct"](this.basketProduct.id).quantity),this.$emit("callbackfn"),this.quantity++},decrement:function(){console.log("test"),this.$store.commit("basket/decrementProduct",this.basketProduct.id),this.quantity--,this.$emit("callbackfn")}},computed:{},created:function(){this.quantity=this.basketProduct.quantity},data:function(){return{quantity:0}}},N=D,H=Object(o["a"])(N,L,T,!1,null,null,null),z=H.exports,J={name:"products",components:{Footer:w["default"],Header:O,BasketItem:z},data:function(){return{basketProducts:[],totalPrice:0,totalItems:0,userAuth:!1,order:{user_id:0,totalAmount:-1,status_id:0,items:[]}}},methods:{initBasketProducts:function(){var t=this.$store.getters["basket/getProducts"];this.basketProducts=[];for(var e=0;e<t.length;e++)t[e].quantity>0&&(this.basketProducts[e]=this.$store.getters["products/getProduct"](t[e].id.toString()),this.basketProducts[e].quantity=t[e].quantity)},calcTotalPrice:function(){for(var t=0,e=0;e<this.basketProducts.length;e++)t+=parseInt(this.basketProducts[e].price)*this.basketProducts[e].quantity;this.totalPrice=t},redo:function(){this.initBasketProducts(),this.calcTotalPrice(),this.totalItems=this.basketProducts.length,this.emptyBasket=this.totalItems>0,this.userAuth=void 0!=this.$store.getters["user/getUser"].id},convertItems:function(){for(var t=[],e=0;e<this.basketProducts.length;e++)t[e]={id:this.basketProducts[e].id.toString(),quantity:this.basketProducts[e].quantity};return t},makeOrder:function(){var t=this;return Object(x["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.order.user_id=t.$store.getters["user/getUser"].id.toString(),t.order.totalAmount=t.totalPrice.toString(),t.order.status_id=1,t.order.items=t.convertItems(),console.log(t.order),e.next=7,t.$store.dispatch("orders/addOrder",t.order);case 7:r=e.sent,r&&(console.log("order placed"),t.$store.commit("basket/clearBasket"),t.$router.push({path:"/message/3"}));case 9:case"end":return e.stop()}}),e)})))()}},created:function(){this.redo()},mounted:function(){},computed:{}},G=J,W=Object(o["a"])(G,q,M,!1,null,"219bc2ec",null),Z=W.exports,Y=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Header"),t.error?r("Error",{staticStyle:{top:"0rem"},attrs:{errorMsg:t.errorMsg}}):t._e(),t.userAuth?r("div",[r("h3",{staticStyle:{"text-align":"center","margin-top":"5rem",color:"white"}},[t._v("Already Logged in!")])]):r("div",{staticClass:"card position-absolute translate-middle shadow-lg p-3  bg-body",staticStyle:{display:"block",width:"28rem",height:"28rem",color:"blue",left:"50%",top:"45%","margin-top":"3rem","margin-bottom":"auto","border-radius":"10px"}},[r("div",{staticClass:"position.position-relative start-0 top-50 text-center fs-4"},[t._v(" Register")]),r("form",{on:{submit:function(e){return e.preventDefault(),t.register.apply(null,arguments)}}},[r("div",{staticClass:"form-floating mb-2 mx-auto",staticStyle:{width:"85%",margin:"1.5rem"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.user.name,expression:"user.name"}],staticClass:"form-control",staticStyle:{"border-radius":"9px"},attrs:{name:"name",type:"text",id:"nameControl",placeholder:"Name"},domProps:{value:t.user.name},on:{input:function(e){e.target.composing||t.$set(t.user,"name",e.target.value)}}}),r("label",{staticClass:"form-label",attrs:{for:"nameControl"}},[t._v("Name")])]),r("div",{staticClass:"form-floating mb-2 mx-auto",staticStyle:{width:"85%",margin:"1.5rem"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],staticClass:"form-control",staticStyle:{"border-radius":"9px"},attrs:{name:"email",type:"email",id:"exampleFormControlInput1",placeholder:"Email address"},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}}),r("label",{attrs:{for:"exampleFormControlInput1"}},[t._v("Email address")])]),r("div",{staticClass:"form-floating mb-2 mx-auto",staticStyle:{width:"85%",margin:"1.5rem"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control",staticStyle:{"border-radius":"9px"},attrs:{name:"password",type:"password",id:"floatingPassword",placeholder:"Password"},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}}),r("label",{attrs:{for:"floatingPassword"}},[t._v("Password")])]),r("div",{staticClass:"form-floating mb-3 mx-auto",staticStyle:{width:"85%",margin:"1.5rem"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.passwordConfirmation,expression:"passwordConfirmation"}],staticClass:"form-control",staticStyle:{"border-radius":"9px"},attrs:{type:"password",id:"floatingPassword2",placeholder:"Confirm password"},domProps:{value:t.passwordConfirmation},on:{input:function(e){e.target.composing||(t.passwordConfirmation=e.target.value)}}}),r("label",{attrs:{for:"floatingPassword2"}},[t._v("Confirm password")])]),r("button",{staticClass:"position-absolute btn btn-primary translate-middle-x p-2",staticStyle:{left:"50%","font-size":"18px"},attrs:{type:"submit"}},[t._v("Sign Up")])])]),r("Footer")],1)},X=[],K=(r("ac1f"),r("466d"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card bg-danger text-white tex",staticStyle:{top:"5rem"}},[r("div",{staticClass:"card-body text-center border"},[r("h3",[t._v(t._s(t.errorMsg))])])])}),Q=[],V={props:["errorMsg"]},tt=V,et=Object(o["a"])(tt,K,Q,!1,null,null,null),rt=et.exports,st={components:{Footer:w["default"],Header:O,Error:rt},data:function(){return{user:{name:"",email:"",password:""},passwordConfirmation:"",submitting:!0,error:!1,errorMsg:"",userAuth:!1}},methods:{validateForm:function(){var t=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;return console.log(this.user.password+" "+this.passwordConfirmation),this.user.email.match(t)?this.user.password!==this.passwordConfirmation?(this.error=!0,this.errorMsg="Passwords dont match!",!1):this.user.password.length<6?(this.error=!0,this.errorMsg="Passwords must be at least 6 characters long",!1):(this.error=!1,this.errorMsg="",!0):(this.error=!0,this.errorMsg="Invalid email format",!1)},register:function(){var t=this;return Object(x["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.validateForm()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.$store.dispatch("user/userExists",t.user);case 4:if(r=e.sent,!r){e.next=9;break}console.log("existe na BD"),e.next=14;break;case 9:return console.log("teste aq"),e.next=12,t.$store.dispatch("user/addUser");case 12:e.sent,t.$router.push({path:"/message/0"});case 14:case"end":return e.stop()}}),e)})))()}},computed:{},directives:{},created:function(){this.userAuth=void 0!=this.$store.getters["user/getUser"].id}},at=st,nt=Object(o["a"])(at,Y,X,!1,null,"6184cabd",null),ot=nt.exports,it=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Header"),t.error?r("div",[r("Error",{attrs:{errorMsg:t.errorMsg}})],1):t._e(),t.userAuth?r("div",[r("h3",{staticStyle:{"text-align":"center","margin-top":"5rem",color:"white"}},[t._v("Already Logged in!")])]):r("div",{staticClass:"card position-absolute translate-middle shadow-lg p-4  bg-body",staticStyle:{display:"block",width:"30rem",height:"22rem",color:"blue",left:"50%",top:"45%","border-radius":"10px"}},[r("div",{staticClass:"position.position-relative start-0 top-50 text-center fs-4"},[t._v(" Login")]),r("form",{on:{submit:function(e){return e.preventDefault(),t.login.apply(null,arguments)}}},[r("div",{staticClass:"form-floating mb-2 mx-auto",staticStyle:{width:"85%",margin:"1.5rem"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],staticClass:"form-control",staticStyle:{"border-radius":"9px"},attrs:{name:"email",type:"email",id:"exampleFormControlInput1",placeholder:"Email address"},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}}),r("label",{attrs:{for:"exampleFormControlInput1"}},[t._v("Email address")])]),r("div",{staticClass:"form-floating mb-3 mx-auto",staticStyle:{width:"85%",margin:"1.5rem"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control",staticStyle:{"border-radius":"9px"},attrs:{name:"password",type:"password",id:"floatingPassword",placeholder:"Password"},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}}),r("label",{attrs:{for:"floatingPassword"}},[t._v("Password")])]),t._m(0),r("button",{staticClass:"position-absolute btn btn-primary translate-middle-x p-2",staticStyle:{left:"50%","font-size":"18px"},attrs:{type:"submit"}},[t._v("Sign In")])])]),r("Footer")],1)},ct=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"form-check"},[r("input",{staticClass:"form-check-input",staticStyle:{"margin-left":"1rem"},attrs:{type:"checkbox",value:"",id:"flexCheckDefault"}}),r("label",{staticClass:"form-check-label",staticStyle:{"margin-left":"0.8rem"},attrs:{name:"rememberMe",for:"flexCheckDefault"}},[t._v(" Remember Me? ")])])}],ut={components:{Footer:w["default"],Header:O,Error:rt},data:function(){return{user:{email:"",password:""},submitting:!1,error:!1,errorMsg:"",userAuth:!1}},methods:{login:function(){var t=this;return Object(x["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(t.user),e.next=3,t.$store.dispatch("user/loginUser",t.user);case 3:r=e.sent,r&&(console.log(t.$store.getters["user/getUser"]),t.$router.push({path:"/message/1"}));case 5:case"end":return e.stop()}}),e)})))()}},computed:{},directives:{},created:function(){this.userAuth=void 0!=this.$store.getters["user/getUser"].id}},lt=ut,dt=Object(o["a"])(lt,it,ct,!1,null,null,null),mt=dt.exports,pt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div")},ft=[],ht={data:function(){return{success:!1,user:{}}},methods:{},created:function(){var t=Object(x["a"])(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.$store.getters["user/getUser"].session_id,t.next=3,this.$store.dispatch("user/logoutUser",e);case 3:r=t.sent,r&&this.$router.push({path:"/message/2"});case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},gt=ht,bt=Object(o["a"])(gt,pt,ft,!1,null,null,null),vt=bt.exports,xt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Header"),t.userAuth?0===t.orders.length?r("div",{staticClass:"background d-flex justify-content-center align-items-center"},[r("div",[r("h3",{staticStyle:{"text-align":"center","margin-top":"5rem",color:"white"}},[t._v("Your orders are empty go order something!")]),r("router-link",{attrs:{to:"/shop"}},[r("button",{staticClass:"btn btn-dark btn-block btn-lg",attrs:{type:"button","data-mdb-ripple-color":"dark"}},[t._v("Order ")])])],1)]):t.orders.length>0?r("div",{staticClass:"row d-flex justify-content-center align-items-center h-100"},[r("div",{staticClass:"col-12"},[r("div",{staticClass:"card card-registration card-registration-2",staticStyle:{"border-radius":"15px"}},[r("div",{staticClass:"card-body p-0"},[r("div",{staticClass:"row g-0"},[r("div",{staticClass:"col-lg-8"},[r("div",{staticClass:"p-5"},t._l(t.orders,(function(t){return r("OrderItem",{key:t.id,attrs:{order:t}})})),1)])])])])])]):t._e():r("div",[r("h3",{staticStyle:{"text-align":"center","margin-top":"5rem",color:"white"}},[t._v("Login first to check your orders!")])]),r("Footer")],1)},wt=[],yt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card",staticStyle:{width:"30rem","margin-bottom":"1.5rem",border:"1px solid #023020"}},[r("div",{staticClass:"card-body"},[r("h4",{staticClass:"card-title"},[t._v("Order # "+t._s(t.order.order_num))]),1==t.totalItems?r("h5",{staticClass:"card-subtitle mb-2 text-muted"},[t._v("1 Item in total")]):r("h5",{staticClass:"card-subtitle mb-2 text-muted"},[t._v(t._s(t.totalItems)+" Items in total")]),r("h6",[t._v("Ordered at "+t._s(t.order.created_at))]),r("h5",[t._v("Total price: "+t._s(t.order.total)+" €")]),r("br"),r("br"),r("button",{staticClass:"btn btn-primary",staticStyle:{"background-color":"#5F8575",border:"#5F8575"},on:{click:function(e){t.showItems=!t.showItems}}},[r("h6",[t._v(" Show items ")]),t.showItems?r("i",{staticClass:"bi bi-caret-up-fill"}):r("i",{staticClass:"bi bi-caret-down-fill"})]),t.showItems?r("div",[r("ul",{staticClass:"list-group"},t._l(t.order.items,(function(e){return r("li",{staticClass:"list-group-item d-flex justify-content-between align-items-center"},[r("p",[t._v(t._s(e.quantity)+"X "+t._s(e.name))]),t._v(" "),r("p",{staticStyle:{color:"#5F8575","font-size":"16px"}},[t._v(" "+t._s(e.quantity*e.price)+"€")])])})),0)]):t._e()])])},Ct=[],_t={props:["order"],data:function(){return{totalItems:0,showItems:!1,userAuth:!1}},methods:{gettotalItems:function(){for(var t=0,e=0;e<this.order.items.length;e++)t+=parseInt(this.order.items[e].quantity);return t}},created:function(){this.totalItems=this.gettotalItems()}},kt=_t,Pt=Object(o["a"])(kt,yt,Ct,!1,null,null,null),Ot=Pt.exports,St={components:{Footer:w["default"],Header:O,OrderItem:Ot},data:function(){return{isHidden:!1,id:0,orders:[],userAuth:!1}},created:function(){this.userAuth=void 0!=this.$store.getters["user/getUser"].id,this.userAuth&&this.fetchOrders()},methods:{fetchOrders:function(){var t=this;return Object(x["a"])(regeneratorRuntime.mark((function e(){var r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("orders/getMyOrdersFromDB");case 2:for(t.orders=t.$store.getters["orders/getOrders"],r=t.orders.length,s=0;s<t.orders.length;s++)t.orders[s].order_num=r,r--;case 5:case"end":return e.stop()}}),e)})))()}},computed:{}},$t=St,jt=Object(o["a"])($t,xt,wt,!1,null,"1e53708c",null),Et=jt.exports,At=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"logout"},[r("h1",{staticClass:"success-message",staticStyle:{"text-align":"center"}},[t._v(t._s(t.message))])])},It=[],Rt=(r("b0c0"),{data:function(){return{message:""}},mounted:function(){this.setMessage()},methods:{setMessage:function(){var t=this;0==this.$route.params.id?this.message="Welcome! You can now login":1==this.$route.params.id?this.message="Welcome back "+this.$store.getters["user/getUser"].name+"!":2==this.$route.params.id?this.message="Bye, come back soon!":3==this.$route.params.id&&(this.message="Order placed! Thanks for buying with us!");var e=2,r=setInterval((function(){e<=0&&(clearInterval(r),t.$router.push("/shop")),e-=1}),1e3)}}}),Bt=Rt,Ft=(r("0d89"),Object(o["a"])(Bt,At,It,!1,null,"120a122c",null)),Ut=Ft.exports;s["a"].use(l["a"]);var qt=[{path:"/",component:g},{path:"/shop",component:U},{path:"/basket",component:Z},{path:"/register",component:ot},{path:"/login",component:mt},{path:"/logout",component:vt},{path:"/myorders",component:Et},{path:"/message/:id",component:Ut}],Mt=new l["a"]({mode:"history",base:"/~a72730/LAB11/dist/",routes:qt}),Lt=Mt,Tt=r("2f62"),Dt=(r("c740"),{namespaced:!0,state:{products:[]},getters:{getProducts:function(t){return t.products},getProduct:function(t){return function(e){var r=t.products.findIndex((function(t){return t.id==e}));return t.products[r]}}},mutations:{addProducts:function(t,e){t.products=e}},actions:{getProductsFromDB:function(t){return Object(x["a"])(regeneratorRuntime.mark((function e(){var r,s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.prev=1,e.next=4,fetch("http://daw.deei.fct.ualg.pt/~a72730/LAB11/api/products.php");case 4:return s=e.sent,e.next=7,s.json();case 7:a=e.sent,r("addProducts",a),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](1),console.log("error: ",e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))()}},modules:{}}),Nt=Dt,Ht={namespaced:!0,state:{categories:[]},getters:{getCategories:function(t){return t.categories}},mutations:{addCategories:function(t,e){t.categories=e}},actions:{getCategoriesFromDB:function(t){return Object(x["a"])(regeneratorRuntime.mark((function e(){var r,s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.prev=1,e.next=4,fetch("http://daw.deei.fct.ualg.pt/~a72730/LAB11/api/categories.php");case 4:return s=e.sent,e.next=7,s.json();case 7:return a=e.sent,console.log("received data:",a),r("addCategories",a),e.abrupt("return",!0);case 13:return e.prev=13,e.t0=e["catch"](1),console.log("error: ",e.t0),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})))()}},modules:{}},zt=Ht,Jt=(r("e9c4"),r("99af"),{namespaced:!0,state:{user:{},tmp_user:{}},getters:{getUser:function(t){return t.user}},mutations:{loginUser:function(t,e){t.user=e},logoutUser:function(t){t.user={}},tmpUser:function(t,e){t.tmp_user=e}},actions:{userExists:function(t,e){return Object(x["a"])(regeneratorRuntime.mark((function r(){var s,a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s=t.commit,r.prev=1,r.next=4,fetch("http://daw.deei.fct.ualg.pt/~a72730/LAB11/api/users.php?email=".concat(e.email),{method:"GET"});case 4:return a=r.sent,r.next=7,a.json();case 7:if(n=r.sent,console.log("userExists",n),null===n){r.next=14;break}return alert("Email already exists"),r.abrupt("return",!0);case 14:return s("tmpUser",e),r.abrupt("return",!1);case 16:r.next=23;break;case 18:return r.prev=18,r.t0=r["catch"](1),console.error(r.t0),alert("Error: Database connection failed in phase 1"),r.abrupt("return",!1);case 23:case"end":return r.stop()}}),r,null,[[1,18]])})))()},addUser:function(t){return Object(x["a"])(regeneratorRuntime.mark((function e(){var r,s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.state,e.prev=1,e.next=4,fetch("http://daw.deei.fct.ualg.pt/~a72730/LAB11/api/users.php",{method:"POST",body:JSON.stringify(r.tmp_user),headers:{"Content-type":"text/html; charset=UTF-8"}});case 4:return s=e.sent,e.next=7,s.json();case 7:return a=e.sent,console.log("received data:",a),e.abrupt("return",!0);case 12:return e.prev=12,e.t0=e["catch"](1),console.error(e.t0),alert("Error: Database connection failed in phase 2"),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[1,12]])})))()},loginUser:function(t,e){return Object(x["a"])(regeneratorRuntime.mark((function r(){var s,a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s=t.commit,r.prev=1,r.next=4,fetch("http://daw.deei.fct.ualg.pt/~a72730/LAB11/api/users.php?email=".concat(e.email,"&password=").concat(e.password));case 4:return a=r.sent,r.next=7,a.json();case 7:if(n=r.sent,null!=n){r.next=13;break}return alert("Error: Wrong credentials"),r.abrupt("return",!1);case 13:return console.log("received data:",n),s("loginUser",n),r.abrupt("return",!0);case 16:r.next=23;break;case 18:return r.prev=18,r.t0=r["catch"](1),console.error(r.t0),alert("Error: Database connection failed"),r.abrupt("return",!1);case 23:case"end":return r.stop()}}),r,null,[[1,18]])})))()},logoutUser:function(t,e){return Object(x["a"])(regeneratorRuntime.mark((function r(){var s,a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s=t.commit,r.prev=1,r.next=4,fetch("http://daw.deei.fct.ualg.pt/~a72730/LAB11/api/users.php?session_id=".concat(e));case 4:return a=r.sent,r.next=7,a.json();case 7:return n=r.sent,console.log("received data:",n),s("logoutUser"),r.abrupt("return",!0);case 13:return r.prev=13,r.t0=r["catch"](1),console.error(r.t0),r.abrupt("return",!1);case 17:case"end":return r.stop()}}),r,null,[[1,13]])})))()}}}),Gt=Jt,Wt=r("2909"),Zt={namespaced:!0,state:{orders:[]},getters:{getOrders:function(t){return t.orders}},mutations:{addOrders:function(t,e){t.orders=e},addOrder:function(t,e){t.orders=[].concat(Object(Wt["a"])(t.orders),[e])}},actions:{getMyOrdersFromDB:function(t){return Object(x["a"])(regeneratorRuntime.mark((function e(){var r,s,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,s=t.rootGetters,e.prev=1,e.next=4,fetch("http://daw.deei.fct.ualg.pt/~a72730/LAB11/api/orders.php?session_id=".concat(s["user/getUser"].session_id));case 4:return a=e.sent,e.next=7,a.json();case 7:n=e.sent,r("addOrders",n),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](1),console.log("error: ",e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))()},addOrder:function(t,e){return Object(x["a"])(regeneratorRuntime.mark((function r(){var s,a,n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s=t.commit,a=t.rootGetters,r.prev=1,console.log("stringify"),console.log(JSON.stringify(e)),r.next=6,fetch("http://daw.deei.fct.ualg.pt/~a72730/LAB11/api/orders.php?session_id=".concat(a["user/getUser"].session_id),{method:"POST",body:JSON.stringify(e),headers:{"Content-type":"application/json; charset=UTF-8"}});case 6:return n=r.sent,r.next=9,n.json();case 9:return o=r.sent,console.log("received data:",o),s("addOrder",o),r.abrupt("return",!0);case 15:return r.prev=15,r.t0=r["catch"](1),console.error(r.t0),r.abrupt("return",!1);case 19:case"end":return r.stop()}}),r,null,[[1,15]])})))()}},modules:{}},Yt=Zt,Xt=(r("159b"),r("a434"),{namespaced:!0,state:{products:[]},getters:{getProducts:function(t){return t.products}},mutations:{clearBasket:function(t){t.products=[]},incrementProduct:function(t,e){var r=t.products.some((function(t){return t.id==e}));r||t.products.push({id:e,quantity:0}),t.products.forEach((function(t){t.id==e&&t.quantity++}))},decrementProduct:function(t,e){t.products.forEach((function(r,s){r.id==e&&r.quantity>=1&&r.quantity--,r.quantity<=0&&t.products.splice(s,1)}))}},actions:{},modules:{}}),Kt=Xt;s["a"].use(Tt["a"]);var Qt=new Tt["a"].Store({modules:{products:Nt,user:Gt,orders:Yt,basket:Kt,categories:zt}});s["a"].config.productionTip=!1,new s["a"]({router:Lt,store:Qt,render:function(t){return t(u)}}).$mount("#app")},"94d4":function(t,e,r){"use strict";var s=r("2e93"),a=r.n(s);e["default"]=a.a},d762:function(t,e,r){"use strict";r.d(e,"a",(function(){return s})),r.d(e,"b",(function(){return a}));var s=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},a=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("footer",{staticClass:"text-center text-lg-start fixed-bottom",staticStyle:{"margin-top":"1rem"}},[r("div",{staticClass:"text-center p-3",staticStyle:{"background-color":"#5F8575"}},[t._v(" © 2022: Diogo Catarino ")])])}]},fd2d:function(t,e,r){"use strict";var s=r("d762"),a=r("94d4"),n=r("2877"),o=Object(n["a"])(a["default"],s["a"],s["b"],!1,null,null,null);e["default"]=o.exports}});
//# sourceMappingURL=app.05eb0340.js.map